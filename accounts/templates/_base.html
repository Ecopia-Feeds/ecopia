{% extends "base.html" %}
{% load user_extras %}
{% load static %}


{% block content %}
    <header class="bg-transparent border-b border-primary-green">
      <div class="bg-primary-green text-white h-[32px] w-full flex justify-between items-center px-[96px] py-1">
        
        <!-- Left social icons -->
        <div class="socials flex flex-row gap-2 items-center">
          <span class="badge-label">Follow Us:</span>
          <a href="https://facebook.com" target="_blank">
            <img src="{% static 'assets/facebook.png' %}" alt="Facebook">
          </a>
          <a href="https://twitter.com" target="_blank">
            <img src="{% static 'assets/x-twitter.png' %}" alt="Twitter">
          </a>
          <a href="https://instagram.com" target="_blank">
            <img src="{% static 'assets/instagram.png' %}" alt="Instagram">
          </a>
        </div>

        <!-- Right contact info -->
        <ul class="flex flex-row gap-4 items-center">
          <li class="flex items-center gap-1">
            <img src="{% static 'assets/search.png' %}" alt="search">
          </li>
          <li class="flex items-center gap-1">
            <img src="{% static 'assets/call.png' %}" alt="call">
            <span class="badge-label">Call: 0742080330</span>
          </li>
          <li class="flex items-center gap-1">
            <img src="{% static 'assets/email.png' %}" alt="Email">
            <span class="badge-label">Email: info@ecopia.com</span>
          </li>
        </ul>
      </div>

      <div class= "bg-secondary-green text-primary-green w-full flex justify-between items-center px-[96px] py-4">
          <a href="/" target="">
            <img src="{% static 'assets/logo.png' %}" alt="logo" class="h-[56px]">
          </a>
          <div class="flex items-center justify-between py-2 gap-x-12">
              <!-- Left Menu -->
              <div class="flex gap-4">
                  <a href="#" class="text-primary-green body-small hover:text-primary-dark-green">About Us</a>
                  <a href="#" class="text-primary-green body-small hover:text-primary-dark-green">Products</a>
                  <a href="#" class="text-primary-green body-small hover:text-primary-dark-green">Blog</a>
                  <a href="#" class="text-primary-green body-small hover:text-primary-dark-green">FAQs</a>
              </div>

              <!-- Right Actions -->
              <div class="flex items-center justify-between gap-x-4">
                  <!-- Cart Icon -->
                  <a href="https://facebook.com" target="_blank">
                    <img src="{% static 'assets/cart.png' %}" alt="Cart">
                  </a>

                  <!-- Account Button -->
                  <div class="relative inline-block text-left">
                    <!-- Button -->
                    <button id="accountButton"
                      class="inline-flex items-center gap-2 bg-primary-green text-white px-4 py-2 rounded-lg shadow hover:bg-primary-dark-green transition">
                      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 10a4 4 0 100-8 4 4 0 000 8zM2 18a8 8 0 1116 0H2z"/>
                      </svg>
                      <span id="accountText">
                          {% if request.user.is_authenticated %}
                            Hi, {{ request.user.full_name|first_name }}
                          {% else %}
                            Account
                          {% endif %}
                        </span>
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2"
                          viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                      </svg>
                    </button>

                    <!-- Dropdown Menu -->
                    <div id="dropdownMenu"
                      class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-white z-50">

                      {% if request.user.is_authenticated %}
                        <!-- Logged In State -->
                        <div id="userMenu">
                          <a href="/account" class="block  text-center px-4 py-2 hover:bg-gray-100">My Profile</a>
                          <a href="/orders" class="block text-center px-4 py-2 hover:bg-gray-100">Orders</a>
                          <a href="/inbox" class="block px-4 text-center py-2 hover:bg-gray-100">Inbox</a>
                          <a href="/wishlist" class="block px-4 text-center py-2 hover:bg-gray-100">Wishlist</a>
                          <a href="/vouchers" class="block px-4 text-center py-2 hover:bg-gray-100">Vouchers</a>
                          <hr class="border-t border-primary-light-green">
                          <a href="{% url 'logout' %}" class="block text-center px-4 py-2 text-accent rounded-b-lg hover:bg-red-50 font-medium">Logout</a>
                        </div>
                      {% else %}
                        <!-- Logged Out State -->
                        <div id="guestMenu" class="justify-center">
                          <a href="{% url 'login' %}" class="block w-3/4  rounded-lg mx-auto my-2 bg-primary-green text-center px-4 py-2 hover:bg-primary-dark-green text-white font-medium">Login</a>
                          <a href="{% url 'register' %}" class="block text-center px-4 py-2 hover:bg-gray-100">Register</a>
                          <hr class="border-t border-primary-light-green">
                          <a href="/account" class="block text-center px-4 py-2 hover:bg-gray-100">My Profile</a>
                          <a href="/orders" class="block text-center px-4 py-2 hover:bg-gray-100">Orders</a>
                          <a href="/wishlist" class="block text-center px-4 py-2 hover:bg-gray-100">Wishlist</a>
                        </div>
                      {% endif %}
                    </div>

                  </div>

              </div>
          </div>

        </div>
    </header>
    <main>
      {% block main %}
      {% endblock %}
    </main>

    <footer class="bg-accent text-white p-4 text-center">
      <p>&copy; 2025 Ecopia. All rights reserved.</p>
    </footer>
    {% block scripts %}
    <script>
      const button = document.getElementById("accountButton");
      const menu = document.getElementById("dropdownMenu");

      if (button) {
        button.addEventListener("click", () => {
          menu.classList.toggle("hidden");
        });

        // Close when clicking outside
        document.addEventListener("click", (e) => {
          if (!button.contains(e.target) && !menu.contains(e.target)) {
            menu.classList.add("hidden");
          }
        });
      }
    </script>
    {% endblock %}
{% endblock %}

