{% extends '_base.html' %}
{% load static %}

{% block main %}
  <div class="max-w-xl w-full bg-white rounded-3xl flex flex-col items-center justify-center my-12 mx-auto shadow-lg p-8 md:p-12">

      <!-- Heading -->
      <h2 class="text-2xl font-semibold text-primary-dark-green text-center">Registration</h2>
      <p class="text-primary-green text-center pb-6 text-sm md:text-base">
        Please fill out this form to register
      </p>

      <!-- Form -->
      <form action="" method="post" class="w-full space-y-4">
        {% csrf_token %}

        <!-- Name -->
        <div>
          <label for="name" class="block text-sm font-medium">Full Name</label>
          <input type="text" id="full_name" name="full_name" aria-label="Full Name"
            class="mt-1 block w-full rounded-lg outline-0 border border-primary-light-green focus:border-2 focus:border-primary-light-green focus:ring-primary-light-green p-3">
        </div>

        <!-- Email -->
        <div>
          <label for="email" class="block text-sm font-medium">E-mail</label>
          <input type="email" id="email" name="email" aria-label="Email Address"
            class="mt-1 block w-full rounded-lg outline-0 border border-primary-light-green focus:border-2 focus:ring-primary-light-green p-3">
        </div>

        <!-- Phone -->
        <div>
          <label for="phone" class="block text-sm font-medium">Phone</label>
          <input type="tel" id="phone" name="phone" aria-label="Phone Number"
            class="mt-1 block w-full rounded-lg outline-0 border border-primary-light-green focus:border-2 focus:ring-primary-light-green p-3">
        </div>

        <!-- Password -->
        <div>
          <label for="password" class="block text-sm font-medium">Password</label>
          <input type="password" id="password1" name="password1" aria-label="Password"
            class="mt-1 block w-full rounded-lg outline-0 border border-primary-light-green focus:border-2 focus:ring-primary-light-green p-3">
        </div>
        <div>
          <label for="password" class="block text-sm font-medium">Confirm Password</label>
          <input type="password" id="password2" name="password2" aria-label="Confirm Password"
            class="mt-1 block w-full rounded-lg outline-0 border border-primary-light-green focus:border-2 focus:ring-primary-light-green p-3">
        </div>

        <!-- Role Selection -->
        <div>
          <label for="role_choice" class="block text-sm font-medium">I am a</label>
          <select id="role_choice" name="role_choice" aria-label="User Role"
            class="mt-1 block w-full outline-0 rounded-lg border border-primary-light-green focus:border-2 focus:border-primary-light-green focus:ring-primary-light-green p-3">
            <option value="CUSTOMER">Customer (Buy Feeds)</option>
            <option value="WASTE_PROVIDER">Partner (Provide Waste)</option>
          </select>
        </div>

        <!-- Terms -->
        <div class="flex items-center space-x-2">
          <input type="checkbox" id="terms" name="terms"
            class="rounded border-primary-light-green outline-0 text-success focus:ring-success">
          <label for="terms" class="text-sm">
            I agree to the 
            <a href="#" class="text-accent underline">Terms and Privacy Policy</a>
          </label>
        </div>

        <!-- Submit -->
        <button id="signup-btn" type="submit"
          class="w-full bg-primary-green text-white py-3 rounded-lg outline-0 font-semibold hover:bg-success transition">
          Sign up
        </button>
      </form>

      <!-- Divider -->
      <div class="flex items-center my-6 w-full">
        <hr class="flex-grow border-primary-light-green">
        <span class="px-2 text-sm">or</span>
        <hr class="flex-grow border-primary-light-green">
      </div>

      <!-- Social Buttons -->
      <div class="w-full flex flex-col gap-3">
        <button class="w-full flex items-center justify-center gap-2 border border-primary-light-green py-2 rounded-lg hover:bg-primary-light-green hover:text-primary-dark-green font-medium transition">
          <img src="{% static 'assets/google-icon.svg' %}" alt="Google" class="h-5 w-5">
          Sign up with Google
        </button>
        <button class="w-full flex items-center justify-center gap-2 border border-primary-light-green py-2 rounded-lg hover:bg-primary-light-green hover:text-primary-dark-green font-medium transition">
          <img src="{% static 'assets/facebook-icon.svg' %}" alt="Facebook" class="h-5 w-5">
          Sign up with Facebook
        </button>
      </div>

      <!-- Sign-in Link -->
      <p class="text-center text-sm mt-6">
        Already a member? 
        <a href="#" class="text-accent font-medium">Sign in</a>
      </p>
  </div>

  <!-- Script to change CTA button text based on role -->
  <script>
    const roleSelect = document.getElementById("role");
    const signupBtn = document.getElementById("signup-btn");

    roleSelect.addEventListener("change", () => {
      if (roleSelect.value === "customer") {
        signupBtn.textContent = "Join as Customer";
      } else if (roleSelect.value === "partner") {
        signupBtn.textContent = "Partner with Us";
      } else {
        signupBtn.textContent = "Sign up";
      }
    });
  </script>
{% endblock %}
